# 网络层

- 向运输层提供怎样的服务
- 寻址问题
- 路由选择问题


## 两种服务
- 面向连接的虚电路服务
    - 可靠通信由网络来保证
    - 必须建立网络层的连接-虚电路VC，逻辑上的电路
    - 通信双方沿着已建立的虚电路发送分组
    - 目的主机的地址仅在建立连接阶段使用，之后每个分组的首部只需携带一条虚电路的编号
    - 如果再使用可靠传输协议，就可以使所发送的分组最终正确到达接收方（无差错按序到达、不重复、不丢失）
    - 通信结束后释放建立的虚电路
    - 主要使用的网络：广域分组交换网，如X.25、帧中继、异步传输模式ATM等
  
- 无连接的数据报服务
    - 可靠通信由用户主机来保证
    - 不需要建立连接
    - 每个分组可以走不同的路径
    - 每个分组必须携带目的主机的完整地址
    - 分组可能误码、丢失、重复和失序
    - 网络本身不提供端到端的可靠传输服务
    - 因特网采用了这种设计思想，将复杂的网络处理功能置于网络边缘（用户主机和其内部的运输层）

## IPv4地址
- 给因特网上的每一台主机或路由器的每一个接口分配一个全世界范围内唯一分32比特的标识符
- 历史阶段：分类编址->划分子网->无分类编址
  - 分类编址
    - 点分十进制来表示
    - A（0，高8位为网络号）、B（10，高16位为网络号）、C（110，高24位为网络号）、D（1110）、E（1111）类网络地址
      - 只用A类、B类、C类地址可以分配给网络中的主机或路由器的各接口，D类地址是多播地址，E类地址是保留地址
      - 主机号为全0的地址是网络地址，不能分配给主机或路由器各接口
      - 主机号为全1的地址是广播地址，不能分配给主机或路由器的各接口
  - 划分子网
    - 点分十进制来表示
    - 子网掩码
  - 无分类编址：
    - 斜线记法，斜线后面写上网络前缀所占的比特数量
    - 路由聚合（构造超网）

