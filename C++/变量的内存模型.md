# C++ 11

### 变量存储  内存模型

c++管理数据内存的三种方式：自动存储、静态存储
c++11新增了第四种：线程存储（变量的持续性和整个线程一样）
![avatar](.\pictures/c++%20memory.png)

| 存储描述| 持续性 | 作用域 | 链接性 | 如何声明|限定符
| :-----| :----- | :----- |:-----|:-----|:-----
| 自动存储 | 自动 | 代码块 | 无|在代码块中 | auto(c++ 11 不再支持)
| 寄存器 | 自动 | 代码块 | 无| 在代码块中| register
|静态，无链接性|静态|代码块|无|在代码块中，使用关键字static | static
|静态，内部链接性|静态|文件|内部|不在任何函数内，使用关键字static | static
|静态，外部链接性|静态|文件|外部|不在任何函数内 | extern（声明时可以省略，使用是必须有）
|动态存储|由new和delete控制|无|无|函数内外都可以声明|

注：const的全局变量的链接性为内部，即外部不可调用，可使用extern关键字来覆盖默认的内部链接性变成外部链接性


### 存储说明符

- auto ：声明变量为自动变量
- register：声明变量为寄存器变量
- static：静态存储变量
- extern：外部链接性
- thread_local：线程变量
- mutable：可以修改const限定的结构中的变量
- volatile：不让编译器执行优化（例如发现几条语句中两次使用了某个变量，编译器不让程序查找这个值两次，会将这个值缓存到寄存器中，这中间可能导致变量的值发生变化）


